<template>
    <div class="signature-main-container slds-p-around_medium">
        <div class="signature-title">{labels.drawSignature}</div>
        <canvas
            class="signature-canvas"
            lwc:dom="manual"
            role="img"
            aria-label={labels.drawSignature}
            onmousedown={handleMouseDown}
            onmousemove={handleMouseMove}
            onmouseup={handleMouseUp}
            onmouseleave={handleMouseUp}
            ontouchstart={handleTouchStart}
            ontouchmove={handleTouchMove}
            ontouchend={handleTouchEnd}
            width="350"
            height="150"
        ></canvas>
        <div class="signature-buttons slds-m-top_small">
            <lightning-button
                label={labels.clear}
                variant="neutral"
                onclick={handleClear}
                disabled={isSaving}></lightning-button>
            <lightning-button
                label={saveButtonLabel}
                variant="brand"
                onclick={handleSave}
                disabled={isSaveDisabled}></lightning-button>
        </div>
        <template if:true={lastSignature}>
            <div class="slds-card signature-last-card">
                <div class="slds-card__body slds-card__body_inner signature-last-card-body">
                    <div class="slds-media">
                        <div class="slds-media__figure">
                            <img src={lastSignature.image} alt={labels.signatureImageAlt} class="signature-last-image" />
                        </div>
                        <div class="slds-media__body signature-last-info">
                            <div class="signature-last-date">
                                <lightning-formatted-date-time value={lastSignature.date} year="numeric" month="long" day="2-digit" hour="2-digit" minute="2-digit" second="2-digit"></lightning-formatted-date-time>
                                <template if:true={lastSignature.name}>
                                    &nbsp;{labels.signedBy} {lastSignature.name}
                                </template>
                            </div>
                            <div class="signature-last-label">{labels.lastSignature}</div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </div>
</template>
